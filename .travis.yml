---
service:
  - docker
dist: xenial
language: ruby
sudo: required
cache:
  bundler: true
  directories:
  - $HOME/.opam
rvm:
  - 2.5.1
before_install:
  - sh travis-scripts/prepare-ubuntu.sh
  - mkdir -p $HOME/bin
  - curl -s https://smartpy.io/dev-20200912-bbb4b34cb579f3d52320c3d2aed8ebcef04429b0/cli/SmartPy.sh > SmartPy.sh
  - chmod +x ./SmartPy.sh
  - ./SmartPy.sh local-install-auto $HOME/bin/smartpy/cli
  - rm ./SmartPy.sh
  - export PATH="$PATH:$HOME/bin/:$HOME/bin/smartpy/cli/"
  - npm link michelson-to-micheline
  - gem install bundler -v 1.16.3
script:
  - bundle install
  - bundle exec rspec --tag '~require_node'
